<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <title>Data input and output</title>
  </head>
  <body>
    <div>
      <div
        class="flex background_black flex_dirction border_black content_center sticky-element"
      >
        <header id="header"></header>
      </div>

      <div class="flex">
        <div>
          <header
            class="flex background_gray les3 left_m sticky-element2"
            id="side_piece"
          ></header>
          <!--les3 sticky-element2-->
        </div>

        <div class="lessen block">
          <h1>Работа с файлами</h1>
          <h2>Создание, открытие, чтение и запись файлов</h2>
          <p class="textIndent">
            В C# для работы с файлами используется пространство имен
            `System.IO`. Для создания, открытия, чтения и записи файлов в этом
            пространстве имен предоставлены различные классы и методы.
          </p>
          <p>Создание файла:</p>
          <p>
            Для создания файла необходимо использовать класс `FileStream`.
            Пример:
          </p>
          <div
            class="inline-flex border_gray2px les2 font_size20xp background_olive"
          >
            <div class="border-right_grin padding_left padding_right grey">
              <p id="integer6">1</p>
            </div>
            <div class="font_size20xp">
              <p class="white_space white padding_right">
                <code class="language-csharp"
                  >string fileName = @"C:\temp\test.txt"; using (FileStream
                  stream = new FileStream(fileName, FileMode.CreateNew)) { //
                  здесь можно записывать данные в файл }</code
                >
              </p>
            </div>
          </div>
          <p class="textIndent">
            В данном примере мы создаем файл `test.txt` в директории `C:\temp` и
            открываем его для записи (`FileMode.CreateNew`). Файл будет
            автоматически закрыт после выполнения блока `using`.
          </p>
          <p>Открытие файла:</p>
          <p class="textIndent">
            Для открытия файла можно использовать класс `FileStream` или класс
            `StreamReader`. Пример использования класса `StreamReader`:
          </p>
          <div
            class="inline-flex border_gray2px les2 font_size20xp background_olive"
          >
            <div class="border-right_grin padding_left padding_right grey">
              <p id="integer10">1</p>
            </div>
            <div class="font_size20xp">
              <p class="white_space white padding_right">
                <code class="language-csharp"
                  >string fileName = @"C:\temp\test.txt"; using (StreamReader
                  reader = new StreamReader(fileName)) { string line; while
                  ((line = reader.ReadLine()) != null) {
                  Console.WriteLine(line); } }</code
                >
              </p>
            </div>
          </div>
          <p class="textIndent">
            В данном примере мы открываем файл `test.txt` для чтения и выводим
            его содержимое на консоль.
          </p>
          <p>Запись в файл:</p>
          <p class="textIndent">
            Для записи данных в файл также можно использовать класс
            `FileStream`. Пример:
          </p>
          <div
            class="inline-flex border_gray2px les2 font_size20xp background_olive"
          >
            <div class="border-right_grin padding_left padding_right grey">
              <p id="integer7">1</p>
            </div>
            <div class="font_size20xp">
              <p class="white_space white padding_right">
                <code class="language-csharp"
                  >string fileName = @"C:\temp\test.txt"; using (FileStream
                  stream = new FileStream(fileName, FileMode.Append)) { byte[]
                  buffer = Encoding.UTF8.GetBytes("Hello, world!");
                  stream.Write(buffer, 0, buffer.Length); }</code
                >
              </p>
            </div>
          </div>
          <p class="textIndent">
            В данном примере мы открываем файл `test.txt` для записи
            (`FileMode.Append`) и записываем в него строку "Hello, world!".
          </p>
          <p>Чтение из файла:</p>
          <p class="textIndent">
            Для чтения данных из файла можно использовать класс `FileStream` или
            класс `StreamReader`. Пример использования класса `StreamReader`:
          </p>
          <div
            class="inline-flex border_gray2px les2 font_size20xp background_olive"
          >
            <div class="border-right_grin padding_left padding_right grey">
              <p id="integer7_2">1</p>
            </div>
            <div class="font_size20xp">
              <p class="white_space white padding_right">
                <code class="language-csharp"
                  >string fileName = @"C:\temp\test.txt"; using (StreamReader
                  reader = new StreamReader(fileName)) { string content =
                  reader.ReadToEnd(); Console.WriteLine(content); }</code
                >
              </p>
            </div>
          </div>
          <p class="textIndent">
            В данном примере мы открываем файл `test.txt` для чтения и выводим
            его содержимое на консоль с помощью метода `ReadToEnd()`.
          </p>
          <h2>Работа с потоками ввода-вывода.</h2>
          <p class="textIndent">
            Работа с потоками ввода-вывода (I/O) является важной частью
            программирования и позволяет обмениваться данными между программой и
            внешними источниками, такими как файлы, сетевые соединения и
            устройства ввода-вывода.
          </p>
          <p class="textIndent">
            В C# работа с потоками I/O осуществляется с помощью классов,
            определенных в пространстве имен System.IO. В этом пространстве имен
            определены классы, которые позволяют создавать, открывать, читать и
            записывать файлы, а также работать с потоками данных и памятью.
          </p>
          <p class="textIndent">
            Для работы с потоками ввода-вывода в C# используются следующие
            классы:
          </p>
          <ul>
            <li class="textIndent">
              Stream: базовый абстрактный класс, от которого наследуются все
              другие классы для работы с потоками данных. Stream определяет
              базовые методы и свойства для чтения и записи данных.
            </li>
            <li class="textIndent">
              FileStream: класс, который представляет поток для чтения и записи
              данных в файл.
            </li>
            <li class="textIndent">
              MemoryStream: класс, который представляет поток для чтения и
              записи данных в память.
            </li>
            <li class="textIndent">
              TextReader и TextWriter: абстрактные классы, которые определяют
              методы и свойства для чтения и записи символьных данных из потока.
            </li>
            <li class="textIndent">
              StreamReader и StreamWriter: классы, которые позволяют работать с
              символьными данными в текстовом файле.
            </li>
            <li class="textIndent">
              BinaryReader и BinaryWriter: классы, которые позволяют работать с
              бинарными данными в файле.
            </li>
          </ul>
          <p>Пример чтения и записи текстового файла:</p>
          <div
            class="inline-flex border_gray2px les2 font_size20xp background_olive"
          >
            <div class="border-right_grin padding_left padding_right grey">
              <p id="integer12_2">1</p>
            </div>
            <div class="font_size20xp">
              <p class="white_space white padding_right">
                <code class="language-csharp"
                  >// Запись в файл using (StreamWriter writer = new
                  StreamWriter("file.txt")) { writer.WriteLine("Hello, world!");
                  } // Чтение из файла using (StreamReader reader = new
                  StreamReader("file.txt")) { string line = reader.ReadLine();
                  Console.WriteLine(line); }</code
                >
              </p>
            </div>
          </div>
          <p class="textIndent">
            В этом примере мы создаем файл "file.txt" и записываем в него строку
            "Hello, world!". Затем мы открываем файл для чтения и считываем
            строку из файла, которую затем выводим на экран.
          </p>
          <p class="textIndent">
            Обратите внимание, что мы использовали конструкцию using для
            автоматического закрытия потоков после их использования. Это важно
            для правильной работы с ресурсами и избежания утечек памяти.
          </p>

          <h2>Обработка ошибок ввода-вывода.</h2>
          <p class="textIndent">
            При работе с потоками ввода-вывода возможны различные ошибки, такие
            как ошибки доступа к файлам, ошибки формата данных, ошибки сетевого
            соединения и т.д. Чтобы обрабатывать эти ошибки, необходимо
            использовать блок try-catch.
          </p>
          <p class="textIndent">
            Например, при чтении файла может возникнуть исключение IOException,
            которое свидетельствует о проблемах с доступом к файлу или сетевым
            соединением. В этом случае можно использовать следующий код для
            обработки ошибок:
          </p>
          <div
            class="inline-flex border_gray2px les2 font_size20xp background_olive"
          >
            <div class="border-right_grin padding_left padding_right grey">
              <p id="integer11">1</p>
            </div>
            <div class="font_size20xp">
              <p class="white_space white padding_right">
                <code class="language-csharp"
                  >try { StreamReader sr = new StreamReader("file.txt"); string
                  line = sr.ReadLine(); Console.WriteLine(line); sr.Close(); }
                  catch (IOException e) { Console.WriteLine("An error occurred:
                  " + e.Message); }</code
                >
              </p>
            </div>
          </div>
          <p class="textIndent">
            Если возникнет исключение IOException при чтении файла, то программа
            перейдет в блок catch, где будет выведено сообщение об ошибке. После
            этого можно предпринять дополнительные действия, например,
            попробовать открыть файл снова или выйти из программы.
          </p>
        </div>
      </div>
    </div>
    <script src="./One.js"></script>
    <script src="./console.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-csharp.min.js"></script>
    <div
      style="
        height: 100px;
        margin-top: 100px;
        background: rgb(40, 42, 53);
        clear: both;
      "
    >
      <p style="text-align: right">
        Если есть вопросы или нашли ошибку смело пишите мне
        <a href="mailto:malishevdanil@yandex.ru">Данилу М.В.</a>
      </p>
    </div>
  </body>
  >
</html>
